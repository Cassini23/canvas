<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        canvas{
            display: block;
            margin: 4em auto;
            border: 1px solid grey;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            var canvas = document.querySelector('canvas');
            var canvasRect = canvas.getBoundingClientRect();
            var offset = [canvasRect.left, canvasRect.top];
            console.log(offset);
            var context = canvas.getContext('2d'); //3d use web-gl

            function mouseMoveHandler(event){
                var currpos = [event.clientX,event.clientY];
                var prev = mouseMoveHandler.initpos;
                context.fillRect(Math.abs(prev[0]- offset[0]), Math.abs(prev[1]- offset[1]),Math.abs(currpos[0] - prev[0] - offset[0]),Math.abs(currpos[1] - prev[1] -offset[1]));
            }

            canvas.addEventListener('mousedown', function(event){
                context.fillStyle= 'rgba(0,0,255,0.5)';
                mouseMoveHandler.initpos = [event.clientX,event.clientY];
                canvas.addEventListener('mousemove', mouseMoveHandler);
            });

            canvas.addEventListener('mouseup', function(){
               // mouseMoveHandler.finalpos = [event.clientX,event.clientY];
                //context.clearRect(0,0,canvas.width,canvas.height);
                canvas.removeEventListener('mousemove',mouseMoveHandler);
            });
        });


    </script>
</head>
<body>
<canvas width="600" height="600">

</canvas>
</body>
</html>